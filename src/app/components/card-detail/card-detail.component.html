@let currentCard = card();

<div class="glass rounded-2xl p-5 h-full">
  <!-- Card Title & Actions -->
  <div class="mb-4">
    <div class="flex items-start justify-between gap-2">
      <div class="flex-1 min-w-0">
        <h2 class="text-lg font-bold text-white truncate">{{ currentCard.name }}</h2>
        <div class="flex items-center gap-2 mt-1">
          <span class="px-2 py-0.5 text-xs font-medium rounded-full bg-[#e94560]/20 text-[#ff6b6b]">
            {{ currentCard.type }}
          </span>
          @if (currentCard.attribute) {
            <span class="px-2 py-0.5 text-xs font-medium rounded-full bg-blue-500/20 text-blue-400">
              {{ currentCard.attribute }}
            </span>
          }
        </div>
      </div>
      
      <!-- Anime Card Button -->
      <button
        (click)="openAnimeModal()"
        class="p-2 rounded-lg bg-gradient-to-br from-[#e94560] to-[#ff6b6b] hover:from-[#ff6b6b] hover:to-[#e94560] text-white transition-all shadow-lg hover:shadow-xl"
        title="Generate Anime Style Card"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Card Image & Stats -->
  <div class="flex flex-col xl:flex-row gap-4">
    <div class="w-full max-w-[200px] mx-auto xl:mx-0">
      <app-card [card]="currentCard" imageType="cropped" />
    </div>

    <div class="flex-1 space-y-2">
      @for (property of [
        { label: label.race, value: currentCard.race, icon: 'ğŸ­' },
        { label: label.level, value: currentCard.level, icon: 'â­' },
        { label: label.atk, value: currentCard.atk, icon: 'âš”ï¸' },
        { label: label.def, value: currentCard.def, icon: 'ğŸ›¡ï¸' },
        { label: label.linkval, value: currentCard.linkval, icon: 'ğŸ”—' }
      ]; track property.label) {
        @if (property.value) {
          <div class="flex items-center justify-between text-sm gap-2">
            <span class="text-slate-400 flex items-center gap-1.5">
              <span>{{ property.icon }}</span>
              {{ property.label }}
            </span>
            <span class="font-semibold text-white">{{ property.value }}</span>
          </div>
        }
      }
      @if (currentCard.banlist_info?.ban_goat) {
        <div class="flex items-center justify-between text-sm">
          <span class="text-slate-400">ğŸš« Ban Status</span>
          <span class="px-2 py-0.5 text-xs font-medium rounded-full bg-red-500/20 text-red-400">
            {{ currentCard.banlist_info?.ban_goat }}
          </span>
        </div>
      }
    </div>
  </div>

  <!-- Description -->
  <div class="mt-4 p-3 rounded-xl bg-black/20 border border-white/5">
    <p class="text-sm text-slate-300 leading-relaxed">{{ currentCard.desc }}</p>
  </div>

  <!-- Card ID -->
  <div class="mt-3 text-xs text-slate-500 text-center">
    ID: {{ currentCard.id }}
  </div>
</div>

<!-- Anime Card Modal -->
@if (showAnimeModal() && currentCard) {
  <app-anime-card-modal 
    [card]="currentCard"
    (close)="closeAnimeModal()"
  />
}
